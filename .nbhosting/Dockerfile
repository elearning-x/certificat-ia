# --------
# using scipy, it's kinda big but that should not be a problem
# base-notebook lacks at least numpy, widgets, so...
FROM nbhosting/scipy-notebook:latest

# --------
USER root
# NOTES for converting a Dockerfile from nbclassic
# - explicitly pip install jupyterlab-nbhosting
#   this is what does the menu customization
# - make sure to *NOT* install anything nb-classic
#   i.e. neither of
#   jupyter_contrib_nbextensions
#   jupyter-nbextensions-configurator
#   widgetsnbextension
# - nbhosting stock image now has fewer auto-installed libs
#   so make sure to pip install these if you actually need them
#   - ipywidgets
#   - nbautoeval
#   - ipythontutor

# --------
RUN true \
        # the crux of the matter
    && pip install jupyterlab-nbhosting \
        # formerly known as splitcell, used a lot \
    && pip install jupyterlab-gridwidth \
        # used only once to hide one code cell in taylor \
        # formerly known as hide_input \
    && pip install jupyterlab-hidecell \
        # auto-corrected exos \
    && pip install nbautoeval \
        # auto-illustrated examples \
    && pip install ipythontutor \
    && pip install ipywidgets \ 
    && apt-get update \
    && apt-get install -y graphviz \
    && pip install graphviz \
    && pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cpu \
    && pip install --user -U nltk \
    && pip install scikit-learn \
    && true